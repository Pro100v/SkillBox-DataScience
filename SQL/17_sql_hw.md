# Домашнее задание к уроку 17.1: Установка Docker.

## Инструкция:

### 1. Установите [Docker](https://www.docker.com/products/docker-desktop) .

Ссылка на [Windows-инсталлятор](https://download.docker.com/win/stable/Docker%20for%20Windows%20Installer.exe) .

### 2. Запустите Docker.

Docker позволяет быстро и удобно запускать различные приложения («контейнеры»), в т.ч. mysql-сервер, которым мы будем пользоваться в этом модуле.

## Домашнее задание к уроку 17.2: Создание и подключение к серверу БД.

Инструкция:

### 1. Откройте командную строку (cmd на Windows, terminal в MacOS/Linux).

### 2. Скачайте mysql с помощью команды

`docker pull mysql`

### 3. Запустите mysql-сервер с помощью команды

`docker run --rm --name skill-sql -e MYSQL_ROOT_PASSWORD=test -e MYSQL_DATABASE=skillbox -d mysql`

(заметьте, что эта команда стартует сервер в фоновом режиме).

### 4. Вы можете увидеть список всех запущенных в Докере приложений с помощью команды

`docker ps`

(вы должны увидеть список из одного запущенного приложения).

### 5. Подождите 30 секунд: пока сервер инициализируется, подключиться к нему не получится

### 6. Подключитесь к mysql-серверу с помощью команды

`docker exec -it skill-sql mysql -ptest`

Если все сделано правильно, вы увидите приветствие mysql: `“mysql >”`

Теперь, когда вы подключились наберите команду exit, и вы отключитесь от сервера. Сначала нам нужно загрузить туда «дамп», т.е. создать таблицы и заполнить их данными.

### 7. Теперь, когда вы отключились от сервера и снова находитесь в командной строке,

наберите следующую команду для «заливки дампа» в вашу БД

`docker exec -i skill-sql mysql -ptest skillbox < ./some/folder/dump.sql`

Где [“./some/folder/dump.sql“](skillbox_sql_dump.sql) — это путь до файла с дампом (этот файл прикреплен к уроку).

### 8. Снова подключитесь к БД с помощью команды

`docker exec -it skill-sql mysql -ptest`

Вы можете убедиться что все залилось верно, выполнив в mysql запрос

`SHOW TABLES IN skillbox;`



# Вопросы:

1.Заметил (или может что то не так делал), что в докере необходимо было заново накатывать dump.sql что бы появилась необходимая структура данных. 

2.Что необходимо сделать, что бы структура данных сохранялась для последующих сеансов?
Не смог использовать кириллицу в сеансе mysql - возможно ли ее использовать и как это сделать? 

Мое окружение на Linux:

```
No LSB modules are available.
Distributor ID:    Ubuntu
Description:    Ubuntu 18.04.5 LTS
Release:    18.04
Codename:    bionic
```


# Домашняя работа

## Домашнее задание к уроку 17.3: 
1. Написать запрос для выбора студентов в порядке их регистрации на сервисе.
***

```
mysql> select * 
    -> from Students 
    -> order by registration_date;
+-----+-----------------------------------------+------+---------------------+
| id  | name                                    | age  | registration_date   |
+-----+-----------------------------------------+------+---------------------+
|   1 | Фуриков Эрнст               |   18 | 2016-01-01 00:00:00 |
|   2 | Амбражевич Порфирий   |   19 | 2016-01-08 00:00:00 |
|   3 | Носов Макар                   |   20 | 2016-01-15 00:00:00 |
....
|  98 | Ютилов Ерофей               |   39 | 2017-11-10 00:00:00 |
|  99 | Ярмухаметов Фома         |   40 | 2017-11-17 00:00:00 |
| 100 | Берлунов Вадим             |   41 | 2017-11-24 00:00:00 |
+-----+-----------------------------------------+------+---------------------+
100 rows in set (0.01 sec)
```

2. Написать запрос для выбора 5 самых дорогих курсов, на которых более 4 студентов, и которые длятся более 10 часов.
***

```
mysql> select name, price  
    -> from Courses 
    -> where students_count > 4 
    -> and duration > 10 
    -> order by price Desc 
    -> limit 5;
+-------------------------------------------------------+--------+
| name                                                  | price  |
+-------------------------------------------------------+--------+
| Управление Digital-проектами       | 100000 |
| Дизайн мобильных приложений  |  21375 |
| Интернет-маркетолог от А до Я |  12000 |
| Мобильный разработчик PRO         |  10000 |
| Скетчинг для дизайнеров          |   8550 |
+-------------------------------------------------------+--------+
5 rows in set (0.00 sec)
```

3. Написать один (!) запрос, который выведет одновременно список из имен трёх самых молодых студентов, имен трёх самых старых учителей и названий трёх самых продолжительных курсов.
***
```
mysql> (select name as name, age as param, 'youngest from Students' as description 
    -> from Students order by age asc limit 3) 
    -> union all
    -> (select name, age, 'oldest from Teachers' from Teachers order by age desc limit 3) 
    -> union all
    -> (select name, duration, 'longest time from Courses' from Courses order by duration desc limit 3);
+----------------------------------------------+-------+---------------------------+
| name                                         | param | description               |
+----------------------------------------------+-------+---------------------------+
| Фуриков Эрнст                    |    18 | youngest from Students    |
| Дьячков Севастьян            |    18 | youngest from Students    |
| Шмелёв Гаврила                  |    18 | youngest from Students    |
| Борисюк Саввелий              |    43 | oldest from Teachers      |
| Сияница Олег                      |    42 | oldest from Teachers      |
| Чечуров Радион                  |    41 | oldest from Teachers      |
| Excel                                        |    55 | longest time from Courses |
| С#-разработчик с нуля       |    30 | longest time from Courses |
| Скетчинг для дизайнеров |    30 | longest time from Courses |
+----------------------------------------------+-------+---------------------------+
9 rows in set (0.00 sec)
```

## Домашнее задание к уроку 17.4:
1. Написать запрос для выбора среднего возраста всех учителей с зарплатой более 10 000.
***
```
mysql> select avg(age) as 'Average_teachers_age_where_salary_over_10000' 
    -> from Teachers 
    -> where salary > 10000;

+----------------------------------------------+
| Average_teachers_age_where_salary_over_10000 |
+----------------------------------------------+
|                                      29.1000 |
+----------------------------------------------+
1 row in set (0.00 sec)
```
2. Написать запрос для расчета суммы, сколько будет стоить купить все курсы по дизайну.
***
```
mysql> select sum(price) as cost_all_design_courses 
    -> from Courses 
    -> where type = 'DESIGN';

+-------------------------+
| cost_all_design_courses |
+-------------------------+
|                  859276 |
+-------------------------+
1 row in set (0.00 sec)
```

3. Написать запрос для расчёта, сколько минут (!) длятся все курсы по программированию.
***
```
mysql> select sum(duration * 60) as total_minuts_all_programming_courses 
    -> from Courses 
    -> where type = 'PROGRAMMING';

+--------------------------------------+
| total_minuts_all_programming_courses |
+--------------------------------------+
|                                 6780 |
+--------------------------------------+
1 row in set (0.00 sec)
```

## Домашнее задание к уроку 17.5:
В этому уроке нет ДЗ.

## Домашнее задание к уроку 17.6:
1. Напишите запрос, который выводит сумму, сколько часов должен в итоге проучиться каждый студент (сумма длительности всех курсов на которые он подписан).
***
В результате запрос возвращает две колонки: Имя Студента — Кол-во часов.
```
mysql> select St.name as 'Student_name', sum(Cr.duration) as 'Total_hours_all_courses' 
    -> from Students as St 
    -> left join Subscriptions as Ss on St.id = Ss.student_id 
    -> left join Courses as Cr on Cr.id = Ss.course_id 
    -> group by St.id 
    -> order by Total_hours_all_courses desc;
+-----------------------------------------+-------------------------+
| Student_name                            | Total_hours_all_courses |
+-----------------------------------------+-------------------------+
| Яшнов Владимир             |                      94 |
| Тянников Иларион         |                      85 |
| Кутепов Ефим                 |                      81 |
...
| Блаженов Артем             |                       7 |
| Иньшов Геннадий           |                       7 |
| Гудков Харитон             |                       6 |
+-----------------------------------------+-------------------------+
100 rows in set (0.01 sec)
``` 

2. Напишите запрос, который посчитает для каждого учителя средний возраст его учеников.
***
В результате запрос возвращает две колонки: Имя Учителя — Средний Возраст Учеников.
```
mysql> select Tr.name as 'Teacher_name', avg(St.age) as 'Average_ages_all_students' 
    -> from Teachers as Tr 
    -> left join Courses as Cr on Cr.teacher_id = Tr.id
    -> left join Subscriptions as Ss on Ss.course_id = Cr.id
    -> left join Students as St on St.id = Ss.student_id
    -> group by Tr.id 
    -> having Average_ages_all_students is not null
    -> order by Average_ages_all_students desc;

+---------------------------------------------+---------------------------+
| Teacher_name                                | Average_ages_all_students |
+---------------------------------------------+---------------------------+
| Янко Петр                           |                   34.5000 |
| Ерохин Павел                     |                   34.1667 |
| Яржемковский Дмитрий     |                   33.5000 |
...
| Столяров Авдей                 |                   26.1667 |
| Яблоновский Юлий             |                   26.1667 |
| Чубаров Еремей                 |                   25.1667 |
+---------------------------------------------+---------------------------+
38 rows in set (0.01 sec)
```
3. Напишите запрос, который выводит среднюю зарплату учителей для каждого типа курса (Дизайн/Программирование/Маркетинг и т.д.).
***
В результате запрос возвращает две колонки: Тип Курса — Средняя зарплата.
```
mysql> select Cr.type as 'Course_type', avg(Tr.salary) as 'Average_teachers_salary' 
    -> from Teachers as Tr 
    -> right join Courses as Cr on Cr.teacher_id = Tr.id 
    -> group by Cr.type 
    -> order by 2 desc;

+-------------+-------------------------+
| Course_type | Average_teachers_salary |
+-------------+-------------------------+
| DESIGN      |              12266.6667 |
| MANAGEMENT  |              11857.1429 |
| PROGRAMMING |               8772.7273 |
| MARKETING   |               4038.4615 |
+-------------+-------------------------+
4 rows in set (0.00 sec)
```